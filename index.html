<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Get a quote for charter bus bookings - easy and convenient">
    <title>Bus Charter Quote Request</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- EmailJS for automatic confirmation emails -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üöå Bus Charter Services</h1>
            <p class="subtitle">Request a Quote for Your Charter Bus Booking</p>
        </header>

        <main class="main-content">
            <section class="intro-section">
                <p>Fill out the form below to receive a personalized quote for your charter bus needs. We'll get back to you as soon as possible!</p>
            </section>

            <form id="bookingForm" class="booking-form">
                <!-- Trip Details Section -->
                <div class="form-section">
                    <h2>Trip Details</h2>
                    
                    <div id="dateTimeContainer">
                        <div class="date-time-group" data-index="0">
                            <h3>Trip Day #1</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="date_0">Date *</label>
                                    <input type="date" id="date_0" name="date_0" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="start_time_0">Start Time *</label>
                                    <input type="time" id="start_time_0" name="start_time_0" required>
                                </div>
                                <div class="form-group">
                                    <label for="end_time_0">End Time *</label>
                                    <input type="time" id="end_time_0" name="end_time_0" required>
                                    <div class="checkbox-inline">
                                        <input type="checkbox" id="next_day_0" name="next_day_0">
                                        <label for="next_day_0" class="checkbox-label">Ends next day</label>
                                    </div>
                                    <small>Check "Ends next day" if the trip continues past midnight (e.g., 11 PM to 1 AM)</small>
                                </div>
                            </div>
                            
                            <!-- Locations for this day -->
                            <div class="locations-subsection">
                                <h4>Locations for This Day</h4>
                                
                                <div class="form-group">
                                    <label for="pickup_0">Pick-up Location *</label>
                                    <input type="text" id="pickup_0" name="pickup_0" class="location-input" placeholder="Enter pick-up address or location" required>
                                    <small>Start typing to see suggestions</small>
                                </div>
                                
                                <div class="dropoff-container" data-day-index="0">
                                    <div class="dropoff-group" data-dropoff-index="0">
                                        <div class="form-group">
                                            <label for="dropoff_0_0">Drop-off Location #1 *</label>
                                            <input type="text" id="dropoff_0_0" name="dropoff_0_0" class="location-input" placeholder="Enter drop-off address or location" required>
                                            <small>Start typing to see suggestions</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <button type="button" class="btn-secondary add-dropoff-btn" data-day-index="0">+ Add Another Drop-off</button>
                                <small class="location-note">The final drop-off location will be your final destination for this day.</small>
                            </div>
                        </div>
                    </div>
                    
                    <button type="button" id="addDateBtn" class="btn-secondary">+ Add Another Trip Day</button>
                </div>

                <!-- Passenger Information -->
                <div class="form-section">
                    <h2>Passenger Information</h2>
                    <div class="form-group">
                        <label for="passengers">Number of Passengers *</label>
                        <input type="number" id="passengers" name="passengers" min="1" max="500" placeholder="e.g., 50" required>
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="form-section">
                    <h2>Contact Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Full Name *</label>
                            <input type="text" id="name" name="name" placeholder="John Doe" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" placeholder="john@example.com" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Phone Number *</label>
                            <input type="tel" id="phone" name="phone" placeholder="(555) 123-4567" required>
                        </div>
                        <div class="form-group">
                            <label for="company">Company/Organization (Optional)</label>
                            <input type="text" id="company" name="company" placeholder="ABC Company">
                        </div>
                    </div>
                </div>

                <!-- Description Section -->
                <div class="form-section">
                    <h2>Trip Description</h2>
                    <div class="form-group">
                        <label for="description">Brief Description *</label>
                        <textarea id="description" name="description" rows="4" placeholder="Tell us about your trip (e.g., corporate event, wedding, field trip)" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="notes">Special Notes or Requirements</label>
                        <textarea id="notes" name="notes" rows="4" placeholder="Any additional information, special requests, or requirements"></textarea>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="form-actions">
                    <button type="submit" id="submitBtn" class="btn-primary">
                        <span class="btn-text">Get Your Quote</span>
                        <span class="btn-loader" style="display: none;">
                            <span class="spinner"></span> Submitting...
                        </span>
                    </button>
                </div>

                <!-- Status Messages -->
                <div id="statusMessage" class="status-message" style="display: none;"></div>
            </form>
        </main>

        <footer class="footer">
            <p>&copy; 2024 Bus Charter Services. All rights reserved.</p>
        </footer>
    </div>

    <!-- Load local config first (git-ignored, contains API keys) -->
    <!-- The onerror handler silently continues if file doesn't exist (expected in production) -->
    <script src="config-local.js" onerror="console.log('‚ÑπÔ∏è No local config found, using environment defaults')"></script>
    
    <!-- Load base config -->
    <script src="config.js"></script>
    
    <!-- Merge local config with base config -->
    <script>
        // Merge CONFIG_LOCAL into CONFIG if it exists
        if (typeof CONFIG_LOCAL !== 'undefined') {
            console.log('üîß Merging local configuration...');
            
            // Deep merge function
            function deepMerge(target, source) {
                for (const key in source) {
                    if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {
                        target[key] = target[key] || {};
                        deepMerge(target[key], source[key]);
                    } else {
                        target[key] = source[key];
                    }
                }
                return target;
            }
            
            // Merge configurations
            if (CONFIG_LOCAL.googleMaps) {
                CONFIG.googleMaps = { ...CONFIG.googleMaps, ...CONFIG_LOCAL.googleMaps };
            }
            if (CONFIG_LOCAL.emailjs) {
                CONFIG.emailjs = deepMerge({ ...CONFIG.emailjs }, CONFIG_LOCAL.emailjs);
            }
            
            console.log('‚úÖ Local configuration loaded successfully');
            console.log('üîë API Keys loaded:', {
                googleMaps: CONFIG.googleMaps.apiKey ? '‚úÖ' : '‚ùå',
                emailjs: CONFIG.emailjs.publicKey ? '‚úÖ' : '‚ùå'
            });
        } else {
            console.log('‚ÑπÔ∏è Using default configuration (no local overrides)');
            console.log('üí° To add API keys securely, see SECURITY_SETUP.md');
        }
        
        // Initialize EmailJS if configured
        try {
            if (typeof emailjs !== 'undefined' && CONFIG.emailjs && CONFIG.emailjs.enabled && CONFIG.emailjs.publicKey) {
                emailjs.init(CONFIG.emailjs.publicKey);
                console.log('‚úÖ EmailJS initialized successfully');
            }
        } catch (error) {
            console.warn('‚ö†Ô∏è Failed to initialize EmailJS:', error);
            // Site will continue to work without email functionality
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
